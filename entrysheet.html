<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" />
  <title>BS/MFI | Entrance Form</title>
  <link rel="icon" type="image/x-icon" href="https://i.ibb.co/gW8Py0B/BS.png">
  <style>
    body {
      background-color: #ffffff;
      font-family: Arial, sans-serif;
      text-align: center;
    }
    .hero.is-primary.is-bold {
    background-image: linear-gradient(135deg, #003cff 0%, #008bff 100%);
}
    .hero.is-primary {
          background: linear-gradient(135deg, #003cff 0%, #008bff 100%);
    }
    .hero-body .title {
      font-size: 2.5rem;
      font-weight: 600;
      color: rgb(0, 0, 0);
    }
    .container {
      max-width: 600px;
    margin: 2rem auto;
    padding: 2rem;
    background: transparent;
    }
    .label {
      font-weight: 600;
      color: #000000;
      margin-bottom: 0.5rem;
          text-align: start;
    }
    .input {
         border: solid 1,5px gray;
    border-radius: 0px;
      padding: 0.75rem;
      outline: none;
      transition: border-color 0.3s ease;
    }
    .input:focus {
      border-color: #1e40af;
      box-shadow: 0 0 0 0.125em rgba(30, 64, 175, 0.25);
    }
    
    .field.is-grouped{
          display: flex
;
    justify-content: space-between;
    }
    .modal-content {
      max-width: 500px;
      margin: 0 auto;
    }
    .modal .box {
      padding: 2rem;
      text-align: center;
    }
    .hero.is-primary .title{
      color: black;
    }
    .modal .box p {
      margin-bottom: 1.5rem;
      color: #363636;
      font-size: 1.1rem;
    }
    #message {
      display: none;
      margin: 20px;
      padding: 1rem;
      font-weight: bold;
      text-align: center;
      transition: opacity 0.3s ease;
    }
    button{
          border-radius: 100px;
    margin: 10px;
    }
    .button.is-success{
    background-color: blue;
    border-color: transparent;
    color: #fff;
    border-radius: 13px;
}
.button.is-primary {
    background-color: #00b6ff;
    color: black;
    border-radius: 0px;
}
button:hover{
  background: none;
}
.hero-body .title {
    font-size: 30px;
    font-weight: 600;
    color: rgb(0, 0, 0);
}
  </style>
</head>
<body>
  <section class="hero is-primary is-bold">
    <marquee behavior="" direction="left" style="    background: black;
    padding: 6px;
    position: fixed;
    font-size: 12px;    z-index: 10000;
">
    Complete all required details accurately and pay the entrance fee to create your account. Once everything is finalized, message your coordinator to activate the account.
    </marquee>
  
    <div class="hero-body">
      <div class="container">
        <h1 class="title">BS/MFI<BR>Entrance Form</h1>
      </div>
    </div>
  </section>

  <form id="data-form" class="container">
    <div class="field">
      <label class="label">Your Name</label>
      <div class="control">
        <input
          class="input"
          type="text"
          placeholder="Enter Your Name"
          name="Name"
          autocomplete="off"
          required
        />
      </div>
    </div>
    <div class="field">
      <label class="label">Primary Phone Number</label>
      <div class="control">
        <input
          class="input"
          type="tel"autocomplete="off"
          placeholder="Enter Primary Phone Number"
          name="Phone1"
          pattern="[0-9]{10}"
          required
        />
      </div>
    </div>
    <div class="field">
      <label class="label">Secondary Phone Number</label>
      <div class="control">
        <input
          class="input"
          type="tel"autocomplete="off"
          placeholder="Enter Secondary Phone Number"
          name="Phone2"
          pattern="[0-9]{10}"
        />
      </div>
    </div>
    <div class="field">
      <label class="label">Password to Your New Account</label>
      <div class="control">
        <input
          class="input"
          type="password"autocomplete="off"
          placeholder="Enter Password"
          name="Password"
          required
        />
      </div>
    </div>
    <div class="field">
      <label class="label">Coordinator Name with ID</label>
      <div class="control">
        <input
          class="input"
          type="text"autocomplete="off"
          placeholder="Enter Coordinator Name and ID"
          name="Coordinator"
          required
        />
      </div>
    </div>
    <div class="field">
      <div class="control">
        <button
          class="button is-primary"
          type="button"autocomplete="off"
          onclick="window.open('https://forms.gle/aoafKScjhK2VkrvE8', '_blank')"
        >
          Upload Aadhar & Passbook here
        </button>
      </div>
    </div>
    <div class="field is-grouped">
      <div class="control">
        <button class="button is-primary" type="button" id="enter-fee-button">
          Entrance Fee
        </button>
      </div>
      <div class="control">
        <button class="button is-success" type="submit" id="send-button">
          Submit Now
        </button>
      </div>
    </div>
  </form>

  <div id="message"></div>

  <div id="modal" class="modal">
    <div class="modal-background"></div>
    <div class="modal-content">
      <div class="box">
        <p>
          You have to pay 240â‚¹ as entrance fee to create the account on your name. This allows us
          to create and store the details of yours, so we have to buy the storage for your account. Send your fee to your coordinator.
        </p>
        <button class="button is-primary" id="modal-close">Close</button>
      </div>
    </div>
  </div>

  <script>
    const form = document.getElementById('data-form');
    const enterFeeButton = document.getElementById('enter-fee-button');
    const sendButton = document.getElementById('send-button');
    const messageDiv = document.getElementById('message');
    const modal = document.getElementById('modal');
    const modalClose = document.getElementById('modal-close');

    // Show modal for Enter Fee button
    enterFeeButton.addEventListener('click', () => {
      modal.classList.add('is-active');
    });

    // Close modal
    modalClose.addEventListener('click', () => {
      modal.classList.remove('is-active');
    });

    // Close modal when clicking background
    modal.addEventListener('click', (e) => {
      if (e.target === modal) {
        modal.classList.remove('is-active');
      }
    });

    // Handle form submission
    form.addEventListener('submit', async (e) => {
      e.preventDefault();

      messageDiv.textContent = 'Submitting...';
      messageDiv.style.display = 'block';
      messageDiv.style.backgroundColor = '#fff3cd';
      messageDiv.style.color = '#856404';
      sendButton.disabled = true;
      sendButton.classList.add('is-loading');

      try {
        const formData = new FormData(form);
        const formDataObj = Object.fromEntries(formData);

        const response = await fetch(
          'https://script.google.com/macros/s/AKfycbwhh-C4IJCK72XUuaGcZFMbpiUU5hdFZTpMGcrO3WCoEOcRv3ZE-oGSDuJgj4LqPwE/exec',
          {
            method: 'POST',
            body: JSON.stringify(formDataObj),
            headers: {
              'Content-Type': 'text/plain;charset=utf-8',
            },
          }
        );

        const data = await response.json();

        if (data.status === 'success') {
          messageDiv.textContent = data.message || 'Data submitted successfully!';
          messageDiv.style.backgroundColor = '#48c78e';
          messageDiv.style.color = 'white';
          form.reset();
        } else {
          throw new Error(data.message || 'Submission failed');
        }
      } catch (error) {
        messageDiv.textContent = `Error: ${error.message}`;
        messageDiv.style.backgroundColor = '#f14668';
        messageDiv.style.color = 'white';
      } finally {
        sendButton.disabled = false;
        sendButton.classList.remove('is-loading');

        setTimeout(() => {
          messageDiv.textContent = '';
          messageDiv.style.display = 'none';
        }, 4000);
      }
    });
  </script>
</body>
</html>