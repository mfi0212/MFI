<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Verify my account</title>
    <link rel="icon" type="image/x-icon" href="https://i.pinimg.com/736x/68/3d/8f/683d8f58c98a715130b1251a9d59d1b9.jpg">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Oswald|Noto+Sans">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap');
        * {
            -webkit-tap-highlight-color: transparent;
            font-family: 'Poppins', sans-serif;
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        body {
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background-color: rgb(10 10 10);
            color: #e0e0e0;
            letter-spacing: 0.5px;
        }
        .header {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            background-color: #1a1a1a;
            padding: 10px 15px;
            display: flex;
            align-items: center;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.5);
            z-index: 10;
        }
        .header h2 {
            font-size: 18px;
            font-weight: 500;
            margin-left: 10px;
        }
        #passwordContainer {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            width: 100%;
            text-align: center;
            line-height: 15px;
            position: fixed;
        }
        #userPassword {
            font-size: 16px;
            border: solid 1.5px transparent;
            background: #1d1d1d;
            color: #fff;
            padding: 8px 25px;
            text-align: center;
            width: 90%;
            outline: none;
            max-width: 280px;
            margin: 26px;
            border-radius: 10px;
            font-weight: 100;
            letter-spacing: 0.6px;
        }
        #userPassword:focus {
            background: #3a3a3a;
        }
        #submitBtn {
            background-color: #00aaff;
            color: #000000;
            border: none;
            font-size: 15px;
            cursor: pointer;
            padding: 7.5px 30px;
            font-weight: 500;
            border-radius: 10px;
        }
        a {
            color: #848484;
        }
        #error-message {
            color: #ff1c1c;
            font-size: 12px;
            margin-top: 10px;
        }
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgb(10 10 10);
            padding: 65px 0px 0px 24px;
            line-height: 30px;
            overflow-y: auto;
            z-index: 10000000;
        }
        .modal h2 {
            color: #e0e0e0;
            font-weight: 500;
        }
        .modal h3 {
            color: #00aeff;
            font-size: 16px;
            font-weight: 400;
            text-decoration: underline;
            margin: 25px 0;
        }
        .modal p {
            color: #a0a0a0;
            font-size: 14px;
            font-weight: 400;
            margin: 10px 0;
            transition: color 0.3s ease;
        }
        .close-btn {
            position: fixed;
            top: 15px;
            left: 15px;
            color: #e0e0e0;
            font-size: 18px;
            cursor: pointer;
            z-index: 11;
            background: #1d1d1d;
            padding: 10px 11px;
            border-radius: 10px;
        }
        i {
            margin-right: 8px;
        }
        .logo {
            position: fixed;
            top: 10px;
            right: 10px;
            z-index: 11;
        }
        .logo img {
            width: 40px;
            border-radius: 50%;
        }
        .logout-btn {
            position: fixed;
            top: 55px;
            right: 5px;
            background-color: #1d1d1d;
            color: #e0e0e0;
            border: none;
            padding: 5px 12px;
            font-size: 12px;
            border-radius: 15px;
            cursor: pointer;
            transition: background-color 0.3s ease;
            z-index: 11;
        }
        .logout-btn a {
            color: #e0e0e0;
            text-decoration: none;
        }
        .logout-btn:hover {
            background-color: #3a3a3a;
        }
        .loan-entry {
            padding: 10px 0;
            margin-bottom: 20px;
            border-bottom: 1px solid #2a2a2a;
            width: 103%;
            padding-bottom: 30px;
        }
        ::-webkit-scrollbar {
            width: 10px;
        }
        .amount-buttons {
               display: flex
;
    gap: 20px;
    margin: 40px 0px 0px;
    padding: 10px 0px;
    overflow-x: scroll;
    width: 100%;
    white-space: nowrap;
        }
        .amount-btn {
            background-color: #1d1d1d;
            color: #e0e0e0;
            border: none;
            padding: 10px 20px;
            font-size: 12px;
            border-radius: 10px 0px;
            cursor: pointer;
            transition: background-color 0.3s ease;
            position: relative;
        }
        .amount-btn:hover {
            background-color: #434343;
            color: rgb(255, 255, 255);
        }
        .amount-btn.active {
            background-color: #00aef8;
            color: #000000;
        }
        .amount-btn .amount-id {
           position: absolute;
    top: -10px;
    right: 0px;
    font-size: 10px;
    color: #00aeff;
    background: #0a0a0a;
    padding: 3px 10px;
    border-radius: 0px 8px;
        }
        .notice {
            font-weight: 200;
            font-size: 12px;
            line-height: 20px;
            position: fixed;
            bottom: 60px;
            color: #ffffffd4;
            padding: 10px;
            border: solid 1.4px #9595954d;
            border-radius: 10px;
            width: 90%;
            max-width: 400px;
        }
        .powered-by {
            position: fixed;
            top: 11px;
            font-size: 10px;
            color: #e2e2e2;
            z-index: 1000;
            background: #3a3a3a;
            text-align: center;
            padding: 6px 11px;
            display: none;
            font-weight: 100;
            border-radius: 8px;
        }
    </style>
</head>
<body>
    <div id="passwordContainer">
        <h2 style="font-weight: 400; font-size: 20px; color: white;">Verify my account</h2>
        <input type="text" id="userPassword" placeholder="Enter password" autocomplete="off">
        <button id="submitBtn">Verify</button><br>
        <p id="error-message"></p>
        <div class="notice">
            You should return the money before the due date, If not additional interest will be charged.
        </div>
    </div>

    <div id="userInfoModal" class="modal">
        <span><i class="fa-solid fa-arrow-left close-btn" onclick="closeModal()"></i></span>
        <h3 style="text-decoration: underline; margin: 25px 0px; font-weight: 600; font-size: 15px;">Borrower</h3>
        <p style="display: flex
;
    align-items: center;
    font-size: 20px;
    gap: 6px;"><span id="userName"></span> <img src="https://cdn-icons-png.freepik.com/256/11105/11105495.png?semt=ais_hybrid" alt="" width="18px"></p> 
        <div class="amount-buttons" id="amountButtons"></div>
        <div id="loanDetails"></div>
    </div>

    <div class="mfi" style="position: fixed; bottom: 10px; font-size: 10px; color: #848484; z-index: 1000; background: transparent; width: 100%; text-align: center; padding: 10px;">
        <a target="_blank" style="text-decoration: none;" href="https://mfi0212.github.io/MFI/mfimain">By Myootive</a>
    </div>
    <div class="powered-by" id="poweredBy">
        Powered by BsPsgenerater
    </div>

    <script>
        const passwords = {
            "4211": {
                name: "Chaitanya Harsha",
                loans: [
                    {
                        planDate: "24-05-2025",
                        endDate: "23-05-2025(Extanded to 3 days)",
                        interest: 7300,
                        takenAmount: 18000,
                        takenFrom: "MLending"
                    },
                    {
                        planDate: "07-04-2025",
                        endDate: "23-05-2025(Extanded to 3 days)",
                        interest: 9300,
                        takenAmount: 10000,
                        takenFrom: "MLLD"
                    },
                ]
            },
            "Mahesh888*": {
                name: "Mahesh",
                loans: [
                    {
                        planDate: "06-04-2025",
                        endDate: "03-06-2025(Extanded to 15 days)",
                        interest: 3000,
                        takenAmount: 10000,
                        takenFrom: "MLending"
                    },
                ]
            },
            "Cherish@123": {
                name: "Cherish",
                loans: [
                    {
                        planDate: "12-04-2025",
                        endDate: "29-05-2025",
                        interest: 1400,
                        takenAmount: 2000,
                        takenFrom: "MLLD"
                    },
                    {
                        planDate: "15-05-2025",
                        endDate: "30-05-2025",
                        interest: 360,
                        takenAmount: 2000,
                        takenFrom: "MLLD"
                    },
                    {
                        planDate: "18-05-2025",
                        endDate: "25-05-2025",
                        interest: 150,
                        takenAmount: 1500,
                        takenFrom: "MLLD"
                    },
                    {
                        planDate: "19-05-2025",
                        endDate: "26-05-2025",
                        interest: 250,
                        takenAmount: 2500,
                        takenFrom: "MLLD"
                    },
                    {
                        planDate: "20-05-2025",
                        endDate: "27-05-2025",
                        interest: 250,
                        takenAmount: 2500,
                        takenFrom: "MLLD"
                    },
                    {
                        planDate: "21-05-2025",
                        endDate: "31-05-2025",
                        interest: 680,
                        takenAmount: 5000,
                        takenFrom: "MLLD"
                    },
                ]
            },
        };

        // Auto-fill password from localStorage on page load within 0.1s
        document.addEventListener("DOMContentLoaded", () => {
            const savedPassword = localStorage.getItem("userPassword");
            if (savedPassword) {
                setTimeout(() => {
                    document.getElementById("userPassword").value = savedPassword;
                    setTimeout(() => {
                        document.getElementById("poweredBy").style.display = "block";
                    }, 1000);
                }, 1000);
            }
        });

        document.getElementById("submitBtn").addEventListener("click", () => {
            const userInput = document.getElementById("userPassword").value.trim();
            const errorMessage = document.getElementById("error-message");
            const user = passwords[userInput];

            if (userInput) {
                localStorage.setItem("userPassword", userInput);
                setTimeout(() => {
                    document.getElementById("poweredBy").style.display = "block";
                }, 50000);
            }

            if (user) {
                document.getElementById("userName").textContent = user.name;
                const amountButtons = document.getElementById("amountButtons");
                amountButtons.innerHTML = "";

                user.loans.forEach((loan, index) => {
                    const btn = document.createElement("button");
                    btn.className = "amount-btn";
                    btn.innerHTML = `${loan.takenAmount} Rupees <span class="amount-id">Amount ${index + 1}</span>`;
                    btn.onclick = () => displayLoanDetails(loan, index);
                    amountButtons.appendChild(btn);
                });

                if (user.loans.length > 0) {
                    displayLoanDetails(user.loans[0], 0);
                }

                document.getElementById("userInfoModal").style.display = "block";
                errorMessage.textContent = "";
            } else {
                errorMessage.textContent = "Amount returned (or) Invalid password!";
            }
        });

        function calculateDaysBetween(startDate, endDate) {
            const dateFormat = /^(\d{2})-(\d{2})-(\d{4})/;
            const startMatch = startDate.match(dateFormat);
            const endMatch = endDate.match(dateFormat);
            if (startMatch && endMatch) {
                const start = new Date(`${startMatch[3]}-${startMatch[2]}-${startMatch[1]}`);
                const end = new Date(`${endMatch[3]}-${endMatch[2]}-${endMatch[1]}`);
                const diffTime = Math.abs(end - start);
                return Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            }
            return "N/A";
        }

        function displayLoanDetails(loan, index) {
            const loanDetails = document.getElementById("loanDetails");
            const totalReturnAmount = (loan.takenAmount + loan.interest).toFixed(2);
            const cleanEndDate = loan.endDate.split('(')[0];
            const daysBetween = calculateDaysBetween(loan.planDate, cleanEndDate);

            document.querySelectorAll(".amount-btn").forEach(btn => btn.classList.remove("active"));
            document.getElementById("amountButtons").children[index].classList.add("active");

            loanDetails.innerHTML = `
                <div class="loan-entry">
                    <h3 style="text-decoration: underline; margin: 25px 0px; font-weight: 600; font-size: 15px;">
                        Service
                    </h3>
                    <p>${loan.takenFrom}</p>
                    <h3 style="text-decoration: underline; margin: 25px 0px; font-weight: 600; font-size: 15px;">
                        Amount Details
                    </h3>
                    <p><i class="fa-solid fa-money-bill-transfer"></i>Amount: ${loan.takenAmount} Rupees</p>
                    <h3 style="text-decoration: underline; margin: 25px 0px; font-weight: 600; font-size: 15px;">
                        Taken & Ends
                    </h3>
                    <p><i class="fa-solid fa-calendar-day"></i> Taken on: ${loan.planDate}</p>
                    <p><i class="fa-solid fa-calendar-check"></i> End on: ${loan.endDate}</p>
                    <h3 style="text-decoration: underline; margin: 25px 0px; font-weight: 600; font-size: 15px;">
                        Loan Duration
                    </h3>
                    <p><i class="fa-solid fa-clock"></i> Duration: ${daysBetween} days</p>
                    <h3 style="text-decoration: underline; margin: 25px 0px; font-weight: 600; font-size: 15px;">
                        Interest
                    </h3>
                    <p><i class="fa-solid fa-arrow-up-wide-short"></i> Interest: ${loan.interest} Rupees</p>
                    <h3 style="text-decoration: underline; margin: 25px 0px; font-weight: 600; font-size: 15px;">
                        Total Amount to Pay
                    </h3>
                    <p><i class="fa-solid fa-money-check-alt"></i> ${totalReturnAmount} Rupees</p>
                </div>
            `;
        }

        function closeModal() {
            document.getElementById("userInfoModal").style.display = "none";
        }
    </script>
</body>
</html>
